{"version":3,"file":"modal-dialog.d553889f.js","sources":["../frontend/components/modal-dialog.js"],"sourcesContent":["import { pauseAllMedia } from '@/lib/utils';\nimport { trapFocus, removeTrapFocus } from '@/lib/a11y';\n\nexport default class ModalDialog extends HTMLElement {\n  constructor() {\n    super();\n    this.querySelector('[id^=\"ModalClose-\"]').addEventListener(\n      'click',\n      this.hide.bind(this, false)\n    );\n    this.addEventListener('keyup', (event) => {\n      if (event.code.toUpperCase() === 'ESCAPE') this.hide();\n    });\n    if (this.classList.contains('media-modal')) {\n      this.addEventListener('pointerup', (event) => {\n        if (event.pointerType === 'mouse' && !event.target.closest('deferred-media, product-model')) this.hide();\n      });\n    } else {\n      this.addEventListener('click', (event) => {\n        if (event.target === this) this.hide();\n      });\n    }\n  }\n\n  connectedCallback() {\n    if (this.moved) return;\n    this.moved = true;\n    document.body.appendChild(this);\n  }\n\n  show(opener) {\n    this.openedBy = opener;\n    const popup = this.querySelector('.template-popup');\n    document.body.classList.add('overflow-hidden');\n    this.setAttribute('open', '');\n    if (popup) popup.loadContent();\n    trapFocus(this, this.querySelector('[role=\"dialog\"]'));\n    pauseAllMedia();\n  }\n\n  hide() {\n    document.body.classList.remove('overflow-hidden');\n    document.body.dispatchEvent(new CustomEvent('modalClosed'));\n    this.removeAttribute('open');\n    removeTrapFocus(this.openedBy);\n    pauseAllMedia();\n  }\n}\ncustomElements.define('modal-dialog', ModalDialog);\n"],"names":[],"mappings":"sFAGe,MAAM,SAAoB,YAAY,CACnD,aAAc,CACZ,QACA,KAAK,cAAc,qBAAqB,EAAE,iBACxC,QACA,KAAK,KAAK,KAAK,KAAM,EAAK,CAChC,EACI,KAAK,iBAAiB,QAAS,AAAC,GAAU,CACxC,AAAI,EAAM,KAAK,YAAW,IAAO,UAAU,KAAK,MACtD,CAAK,EACD,AAAI,KAAK,UAAU,SAAS,aAAa,EACvC,KAAK,iBAAiB,YAAa,AAAC,GAAU,CAC5C,AAAI,EAAM,cAAgB,SAAW,CAAC,EAAM,OAAO,QAAQ,+BAA+B,GAAG,KAAK,KAAI,CAC9G,CAAO,EAED,KAAK,iBAAiB,QAAS,AAAC,GAAU,CACxC,AAAI,EAAM,SAAW,MAAM,KAAK,KAAI,CAC5C,CAAO,CAEJ,CAED,mBAAoB,CAClB,AAAI,KAAK,OACT,MAAK,MAAQ,GACb,SAAS,KAAK,YAAY,IAAI,EAC/B,CAED,KAAK,EAAQ,CACX,KAAK,SAAW,EAChB,KAAM,GAAQ,KAAK,cAAc,iBAAiB,EAClD,SAAS,KAAK,UAAU,IAAI,iBAAiB,EAC7C,KAAK,aAAa,OAAQ,EAAE,EACxB,GAAO,EAAM,cACjB,EAAU,KAAM,KAAK,cAAc,iBAAiB,CAAC,EACrD,GACD,CAED,MAAO,CACL,SAAS,KAAK,UAAU,OAAO,iBAAiB,EAChD,SAAS,KAAK,cAAc,GAAI,aAAY,aAAa,CAAC,EAC1D,KAAK,gBAAgB,MAAM,EAC3B,EAAgB,KAAK,QAAQ,EAC7B,GACD,CACH,CACA,eAAe,OAAO,eAAgB,CAAW"}