import{t as h,r as c}from"./a11y.88ed79d0.js";class p extends HTMLElement{constructor(){super()}connectedCallback(){this.header=document.getElementById("shopify-section-header"),this.headerBounds={},this.currentScrollTop=0,this.preventReveal=!1,this.predictiveSearch=this.querySelector("predictive-search"),this.onScrollHandler=this.onScroll.bind(this),this.hideHeaderOnScrollUp=()=>this.preventReveal=!0,this.addEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.addEventListener("scroll",this.onScrollHandler,!1),this.createObserver()}disconnectedCallback(){this.removeEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),window.removeEventListener("scroll",this.onScrollHandler)}createObserver(){new IntersectionObserver((e,i)=>{this.headerBounds=e[0].intersectionRect,i.disconnect()}).observe(this.header)}onScroll(){const t=window.pageYOffset||document.documentElement.scrollTop;if(!(this.predictiveSearch&&this.predictiveSearch.isOpen)){if(t>this.currentScrollTop&&t>this.headerBounds.bottom){if(this.preventHide)return;requestAnimationFrame(this.hide.bind(this))}else t<this.currentScrollTop&&t>this.headerBounds.bottom?this.preventReveal?(window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout(()=>{this.preventReveal=!1},66),requestAnimationFrame(this.hide.bind(this))):requestAnimationFrame(this.reveal.bind(this)):t<=this.headerBounds.top&&requestAnimationFrame(this.reset.bind(this));this.currentScrollTop=t}}hide(){this.header.classList.add("shopify-section-header-hidden","shopify-section-header-sticky"),this.closeMenuDisclosure(),this.closeSearchModal()}reveal(){this.header.classList.add("shopify-section-header-sticky","animate"),this.header.classList.remove("shopify-section-header-hidden")}reset(){this.header.classList.remove("shopify-section-header-hidden","shopify-section-header-sticky","animate")}closeMenuDisclosure(){this.disclosures=this.disclosures||this.header.querySelectorAll("header-menu"),this.disclosures.forEach(t=>{var e;return(e=t.close)==null?void 0:e.call(t)})}closeSearchModal(){this.searchModal=this.searchModal||this.header.querySelector("details-modal"),this.searchModal.close(!1)}}customElements.define("sticky-header",p);class m extends HTMLElement{constructor(){super(),this.detailsContainer=this.querySelector("details"),this.summaryToggle=this.querySelector("summary"),this.detailsContainer.addEventListener("keyup",t=>t.code.toUpperCase()==="ESCAPE"&&this.close()),this.summaryToggle.addEventListener("click",this.onSummaryClick.bind(this)),this.querySelector('button[type="button"]').addEventListener("click",this.close.bind(this)),this.summaryToggle.setAttribute("role","button")}isOpen(){return this.detailsContainer.hasAttribute("open")}onSummaryClick(t){t.preventDefault(),t.target.closest("details").hasAttribute("open")?this.close():this.open(t)}onBodyClick(t){(!this.contains(t.target)||t.target.classList.contains("modal-overlay"))&&this.close(!1)}open(t){this.onBodyClickEvent=this.onBodyClickEvent||this.onBodyClick.bind(this),t.target.closest("details").setAttribute("open",!0),document.body.addEventListener("click",this.onBodyClickEvent),document.body.classList.add("overflow-hidden"),h(this.detailsContainer.querySelector('[tabindex="-1"]'),this.detailsContainer.querySelector('input:not([type="hidden"])'))}close(t=!0){c(t?this.summaryToggle:null),this.detailsContainer.removeAttribute("open"),document.body.removeEventListener("click",this.onBodyClickEvent),document.body.classList.remove("overflow-hidden")}}customElements.define("details-modal",m);class f extends HTMLElement{constructor(){super(),this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.querySelectorAll("button").forEach(t=>t.addEventListener("click",this.onButtonClick.bind(this)))}onButtonClick(t){t.preventDefault();const e=this.input.value;t.target.name==="plus"?this.input.stepUp():this.input.stepDown(),e!==this.input.value&&this.input.dispatchEvent(this.changeEvent)}}customElements.define("quantity-input",f);class l extends HTMLElement{constructor(){super(),this.mainDetailsToggle=this.querySelector("details"),navigator.platform==="iPhone"&&document.documentElement.style.setProperty("--viewport-height",`${window.innerHeight}px`),this.addEventListener("keyup",this.onKeyUp.bind(this)),this.addEventListener("focusout",this.onFocusOut.bind(this)),this.bindEvents()}bindEvents(){this.querySelectorAll("summary").forEach(t=>t.addEventListener("click",this.onSummaryClick.bind(this))),this.querySelectorAll("button").forEach(t=>t.addEventListener("click",this.onCloseButtonClick.bind(this)))}onKeyUp(t){if(t.code.toUpperCase()!=="ESCAPE")return;const e=t.target.closest("details[open]");!e||(e===this.mainDetailsToggle?this.closeMenuDrawer(t,this.mainDetailsToggle.querySelector("summary")):this.closeSubmenu(e))}onSummaryClick(t){const e=t.currentTarget,i=e.parentNode,s=i.closest(".has-submenu"),n=i.hasAttribute("open"),o=window.matchMedia("(prefers-reduced-motion: reduce)");function a(){trapFocus(e.nextElementSibling,i.querySelector("button")),e.nextElementSibling.removeEventListener("transitionend",a)}i===this.mainDetailsToggle?(n&&t.preventDefault(),n?this.closeMenuDrawer(t,e):this.openMenuDrawer(e)):setTimeout(()=>{i.classList.add("menu-opening"),e.setAttribute("aria-expanded",!0),s&&s.classList.add("submenu-open"),!o||o.matches?a():e.nextElementSibling.addEventListener("transitionend",a)},100)}openMenuDrawer(t){setTimeout(()=>{this.mainDetailsToggle.classList.add("menu-opening")}),t.setAttribute("aria-expanded",!0),trapFocus(this.mainDetailsToggle,t),document.body.classList.add(`overflow-hidden-${this.dataset.breakpoint}`)}closeMenuDrawer(t,e=!1){t!==void 0&&(this.mainDetailsToggle.classList.remove("menu-opening"),this.mainDetailsToggle.querySelectorAll("details").forEach(i=>{i.removeAttribute("open"),i.classList.remove("menu-opening")}),this.mainDetailsToggle.querySelectorAll(".submenu-open").forEach(i=>{i.classList.remove("submenu-open")}),document.body.classList.remove(`overflow-hidden-${this.dataset.breakpoint}`),removeTrapFocus(e),this.closeAnimation(this.mainDetailsToggle))}onFocusOut(t){setTimeout(()=>{this.mainDetailsToggle.hasAttribute("open")&&!this.mainDetailsToggle.contains(document.activeElement)&&this.closeMenuDrawer()})}onCloseButtonClick(t){const e=t.currentTarget.closest("details");this.closeSubmenu(e)}closeSubmenu(t){const e=t.closest(".submenu-open");e&&e.classList.remove("submenu-open"),t.classList.remove("menu-opening"),t.querySelector("summary").setAttribute("aria-expanded",!1),removeTrapFocus(t.querySelector("summary")),this.closeAnimation(t)}closeAnimation(t){let e;const i=s=>{e===void 0&&(e=s),s-e<400?window.requestAnimationFrame(i):(t.removeAttribute("open"),t.closest("details[open]")&&trapFocus(t.closest("details[open]"),t.querySelector("summary")))};window.requestAnimationFrame(i)}}customElements.define("menu-drawer",l);class y extends l{constructor(){super()}openMenuDrawer(t){this.header=this.header||document.getElementById("shopify-section-header"),this.borderOffset=this.borderOffset||this.closest(".header-wrapper").classList.contains("header-wrapper--border-bottom")?1:0,document.documentElement.style.setProperty("--header-bottom-position",`${parseInt(this.header.getBoundingClientRect().bottom-this.borderOffset)}px`),this.header.classList.add("menu-open"),setTimeout(()=>{this.mainDetailsToggle.classList.add("menu-opening")}),t.setAttribute("aria-expanded",!0),trapFocus(this.mainDetailsToggle,t),document.body.classList.add(`overflow-hidden-${this.dataset.breakpoint}`)}closeMenuDrawer(t,e){super.closeMenuDrawer(t,e),this.header.classList.remove("menu-open")}}customElements.define("header-drawer",y);class b extends HTMLElement{constructor(){super();const t=this.querySelector("button");!t||t.addEventListener("click",()=>{const e=document.querySelector(this.getAttribute("data-modal"));e&&e.show(t)})}}customElements.define("modal-opener",b);class d extends HTMLElement{constructor(){if(super(),this.slider=this.querySelector('[id^="Slider-"]'),this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.enableSliderLooping=!1,this.currentPageElement=this.querySelector(".slider-counter--current"),this.pageTotalElement=this.querySelector(".slider-counter--total"),this.prevButton=this.querySelector('button[name="previous"]'),this.nextButton=this.querySelector('button[name="next"]'),!this.slider||!this.nextButton)return;this.initPages(),new ResizeObserver(e=>this.initPages()).observe(this.slider),this.slider.addEventListener("scroll",this.update.bind(this)),this.prevButton.addEventListener("click",this.onButtonClick.bind(this)),this.nextButton.addEventListener("click",this.onButtonClick.bind(this))}initPages(){this.sliderItemsToShow=Array.from(this.sliderItems).filter(t=>t.clientWidth>0),!(this.sliderItemsToShow.length<2)&&(this.sliderItemOffset=this.sliderItemsToShow[1].offsetLeft-this.sliderItemsToShow[0].offsetLeft,this.slidesPerPage=Math.floor((this.slider.clientWidth-this.sliderItemsToShow[0].offsetLeft)/this.sliderItemOffset),this.totalPages=this.sliderItemsToShow.length-this.slidesPerPage+1,this.update())}resetPages(){this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.initPages()}update(){const t=this.currentPage;this.currentPage=Math.round(this.slider.scrollLeft/this.sliderItemOffset)+1,this.currentPageElement&&this.pageTotalElement&&(this.currentPageElement.textContent=this.currentPage,this.pageTotalElement.textContent=this.totalPages),this.currentPage!=t&&this.dispatchEvent(new CustomEvent("slideChanged",{detail:{currentPage:this.currentPage,currentElement:this.sliderItemsToShow[this.currentPage-1]}})),!this.enableSliderLooping&&(this.isSlideVisible(this.sliderItemsToShow[0])&&this.slider.scrollLeft===0?this.prevButton.setAttribute("disabled","disabled"):this.prevButton.removeAttribute("disabled"),this.isSlideVisible(this.sliderItemsToShow[this.sliderItemsToShow.length-1])?this.nextButton.setAttribute("disabled","disabled"):this.nextButton.removeAttribute("disabled"))}isSlideVisible(t,e=0){const i=this.slider.clientWidth+this.slider.scrollLeft-e;return t.offsetLeft+t.clientWidth<=i&&t.offsetLeft>=this.slider.scrollLeft}onButtonClick(t){t.preventDefault();const e=t.currentTarget.dataset.step||1;this.slideScrollPosition=t.currentTarget.name==="next"?this.slider.scrollLeft+e*this.sliderItemOffset:this.slider.scrollLeft-e*this.sliderItemOffset,this.slider.scrollTo({left:this.slideScrollPosition})}}customElements.define("slider-component",d);class g extends d{constructor(){super(),this.sliderControlWrapper=this.querySelector(".slider-buttons"),this.enableSliderLooping=!0,this.sliderControlWrapper&&(this.sliderFirstItemNode=this.slider.querySelector(".slideshow__slide"),this.sliderItemsToShow.length>0&&(this.currentPage=1),this.sliderControlLinksArray=Array.from(this.sliderControlWrapper.querySelectorAll(".slider-counter__link")),this.sliderControlLinksArray.forEach(t=>t.addEventListener("click",this.linkToSlide.bind(this))),this.slider.addEventListener("scroll",this.setSlideVisibility.bind(this)),this.setSlideVisibility(),this.slider.getAttribute("data-autoplay")==="true"&&this.setAutoPlay())}setAutoPlay(){this.sliderAutoplayButton=this.querySelector(".slideshow__autoplay"),this.autoplaySpeed=this.slider.dataset.speed*1e3,this.sliderAutoplayButton.addEventListener("click",this.autoPlayToggle.bind(this)),this.addEventListener("mouseover",this.focusInHandling.bind(this)),this.addEventListener("mouseleave",this.focusOutHandling.bind(this)),this.addEventListener("focusin",this.focusInHandling.bind(this)),this.addEventListener("focusout",this.focusOutHandling.bind(this)),this.play(),this.autoplayButtonIsSetToPlay=!0}onButtonClick(t){super.onButtonClick(t);const e=this.currentPage===1,i=this.currentPage===this.sliderItemsToShow.length;!e&&!i||(e&&t.currentTarget.name==="previous"?this.slideScrollPosition=this.slider.scrollLeft+this.sliderFirstItemNode.clientWidth*this.sliderItemsToShow.length:i&&t.currentTarget.name==="next"&&(this.slideScrollPosition=0),this.slider.scrollTo({left:this.slideScrollPosition}))}update(){super.update(),this.sliderControlButtons=this.querySelectorAll(".slider-counter__link"),this.prevButton.removeAttribute("disabled"),this.sliderControlButtons.length&&(this.sliderControlButtons.forEach(t=>{t.classList.remove("slider-counter__link--active"),t.removeAttribute("aria-current")}),this.sliderControlButtons[this.currentPage-1].classList.add("slider-counter__link--active"),this.sliderControlButtons[this.currentPage-1].setAttribute("aria-current",!0))}autoPlayToggle(){this.togglePlayButtonState(this.autoplayButtonIsSetToPlay),this.autoplayButtonIsSetToPlay?this.pause():this.play(),this.autoplayButtonIsSetToPlay=!this.autoplayButtonIsSetToPlay}focusOutHandling(t){const e=t.target===this.sliderAutoplayButton||this.sliderAutoplayButton.contains(t.target);!this.autoplayButtonIsSetToPlay||e||this.play()}focusInHandling(t){(t.target===this.sliderAutoplayButton||this.sliderAutoplayButton.contains(t.target))&&this.autoplayButtonIsSetToPlay?this.play():this.autoplayButtonIsSetToPlay&&this.pause()}play(){this.slider.setAttribute("aria-live","off"),clearInterval(this.autoplay),this.autoplay=setInterval(this.autoRotateSlides.bind(this),this.autoplaySpeed)}pause(){this.slider.setAttribute("aria-live","polite"),clearInterval(this.autoplay)}togglePlayButtonState(t){t?(this.sliderAutoplayButton.classList.add("slideshow__autoplay--paused"),this.sliderAutoplayButton.setAttribute("aria-label",window.accessibilityStrings.playSlideshow)):(this.sliderAutoplayButton.classList.remove("slideshow__autoplay--paused"),this.sliderAutoplayButton.setAttribute("aria-label",window.accessibilityStrings.pauseSlideshow))}autoRotateSlides(){const t=this.currentPage===this.sliderItems.length?0:this.slider.scrollLeft+this.slider.querySelector(".slideshow__slide").clientWidth;this.slider.scrollTo({left:t})}setSlideVisibility(){this.sliderItemsToShow.forEach((t,e)=>{const i=t.querySelector("a");e===this.currentPage-1?(i&&i.removeAttribute("tabindex"),t.setAttribute("aria-hidden","false"),t.removeAttribute("tabindex")):(i&&i.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"))})}linkToSlide(t){t.preventDefault();const e=this.slider.scrollLeft+this.sliderFirstItemNode.clientWidth*(this.sliderControlLinksArray.indexOf(t.currentTarget)+1-this.currentPage);this.slider.scrollTo({left:e})}}customElements.define("slideshow-component",g);class u extends HTMLElement{constructor(){super(),this.addEventListener("change",this.onVariantChange)}onVariantChange(){this.updateOptions(),this.updateMasterId(),this.toggleAddButton(!0,"",!1),this.updatePickupAvailability(),this.removeErrorMessage(),this.currentVariant?(this.updateMedia(),this.updateURL(),this.updateVariantInput(),this.renderProductInfo(),this.updateShareUrl()):(this.toggleAddButton(!0,"",!0),this.setUnavailable())}updateOptions(){this.options=Array.from(this.querySelectorAll("select"),t=>t.value)}updateMasterId(){this.currentVariant=this.getVariantData().find(t=>!t.options.map((e,i)=>this.options[i]===e).includes(!1))}updateMedia(){if(!this.currentVariant||!this.currentVariant.featured_media)return;document.getElementById(`MediaGallery-${this.dataset.section}`).setActiveMedia(`${this.dataset.section}-${this.currentVariant.featured_media.id}`,!0);const e=document.querySelector(`#ProductModal-${this.dataset.section} .product-media-modal__content`);if(!e)return;const i=e.querySelector(`[data-media-id="${this.currentVariant.featured_media.id}"]`);e.prepend(i)}updateURL(){!this.currentVariant||this.dataset.updateUrl==="false"||window.history.replaceState({},"",`${this.dataset.url}?variant=${this.currentVariant.id}`)}updateShareUrl(){const t=document.getElementById(`Share-${this.dataset.section}`);!t||!t.updateUrl||t.updateUrl(`${window.shopUrl}${this.dataset.url}?variant=${this.currentVariant.id}`)}updateVariantInput(){document.querySelectorAll(`#product-form-${this.dataset.section}, #product-form-installment-${this.dataset.section}`).forEach(e=>{const i=e.querySelector('input[name="id"]');i.value=this.currentVariant.id,i.dispatchEvent(new Event("change",{bubbles:!0}))})}updatePickupAvailability(){const t=document.querySelector("pickup-availability");!t||(this.currentVariant&&this.currentVariant.available?t.fetchAvailability(this.currentVariant.id):(t.removeAttribute("available"),t.innerHTML=""))}removeErrorMessage(){const t=this.closest("section");if(!t)return;const e=t.querySelector("product-form");e&&e.handleErrorMessage()}renderProductInfo(){fetch(`${this.dataset.url}?variant=${this.currentVariant.id}&section_id=${this.dataset.originalSection?this.dataset.originalSection:this.dataset.section}`).then(t=>t.text()).then(t=>{const e=new DOMParser().parseFromString(t,"text/html"),i=document.getElementById(`price-${this.dataset.section}`),s=e.getElementById(`price-${this.dataset.originalSection?this.dataset.originalSection:this.dataset.section}`);s&&i&&(i.innerHTML=s.innerHTML);const n=document.getElementById(`price-${this.dataset.section}`);n&&n.classList.remove("visibility-hidden"),this.toggleAddButton(!this.currentVariant.available,window.variantStrings.soldOut)})}toggleAddButton(t=!0,e,i=!0){const s=document.getElementById(`product-form-${this.dataset.section}`);if(!s)return;const n=s.querySelector('[name="add"]'),o=s.querySelector('[name="add"] > span');!n||(t?(n.setAttribute("disabled","disabled"),e&&(o.textContent=e)):(n.removeAttribute("disabled"),o.textContent=window.variantStrings.addToCart))}setUnavailable(){const t=document.getElementById(`product-form-${this.dataset.section}`),e=t.querySelector('[name="add"]'),i=t.querySelector('[name="add"] > span'),s=document.getElementById(`price-${this.dataset.section}`);!e||(i.textContent=window.variantStrings.unavailable,s&&s.classList.add("visibility-hidden"))}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}}customElements.define("variant-selects",u);class S extends u{constructor(){super()}updateOptions(){const t=Array.from(this.querySelectorAll("fieldset"));this.options=t.map(e=>Array.from(e.querySelectorAll("input")).find(i=>i.checked).value)}}customElements.define("variant-radios",S);class v extends HTMLElement{constructor(){super(),this.elements={input:this.querySelector('input[name="locale_code"], input[name="country_code"]'),button:this.querySelector("button"),panel:this.querySelector(".disclosure__list-wrapper")},this.elements.button.addEventListener("click",this.openSelector.bind(this)),this.elements.button.addEventListener("focusout",this.closeSelector.bind(this)),this.addEventListener("keyup",this.onContainerKeyUp.bind(this)),this.querySelectorAll("a").forEach(t=>t.addEventListener("click",this.onItemClick.bind(this)))}hidePanel(){this.elements.button.setAttribute("aria-expanded","false"),this.elements.panel.setAttribute("hidden",!0)}onContainerKeyUp(t){t.code.toUpperCase()==="ESCAPE"&&(this.hidePanel(),this.elements.button.focus())}onItemClick(t){t.preventDefault();const e=this.querySelector("form");this.elements.input.value=t.currentTarget.dataset.value,e&&e.submit()}openSelector(){this.elements.button.focus(),this.elements.panel.toggleAttribute("hidden"),this.elements.button.setAttribute("aria-expanded",(this.elements.button.getAttribute("aria-expanded")==="false").toString())}closeSelector(t){const e=t.relatedTarget&&t.relatedTarget.nodeName==="BUTTON";(t.relatedTarget===null||e)&&this.hidePanel()}}customElements.define("localization-form",v);export{m as D};
//# sourceMappingURL=localization-form.bef82528.js.map
